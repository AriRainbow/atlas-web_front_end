<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Task 11</title>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJ+Y3Jk8IoKzCjLZ0sKj7QYFhceeeaZQv1T9w="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <script>
      // Function to append post data
      function addPostRow(data) {
        const p = $('<p>');
        const span = $('<span>').text(
          `Post created with id ${data.id}, title: ${data.title}, author: ${data.author}`
        );
        p.append(span);
        $('body').append(p);
      }

      // Function to list all posts
      function listPosts() {
        $.get('http://localhost:3000/posts')
          .done(function (data) {
            data.forEach(function (post) {
              addPostRow(post);
            });
          })
          .fail(function () {
            alert('Server Error');
          });
      }

      // Call listPosts when page loads
      $(document).ready(function () {
        listPosts();
      });
    </script>
  </body>
</html>